# Weather plugin translations
# Supported languages: English (en), German (de), French (fr), Russian (ru)

SUPPORTED_LANGUAGES = {
    "en": "English",
    "de": "Deutsch",
    "fr": "Français",
    "ru": "Русский"
}

# Time format preferences for each language
# "12h" for 12-hour format with AM/PM, "24h" for 24-hour format
TIME_FORMATS = {
    "en": "12h",  # English uses 12-hour format
    "de": "24h",  # German uses 24-hour format
    "fr": "24h",  # French uses 24-hour format
    "ru": "24h"   # Russian uses 24-hour format
}

TRANSLATIONS = {
    "en": {
        # Data point labels
        "sunrise": "Sunrise",
        "sunset": "Sunset",
        "wind": "Wind",
        "humidity": "Humidity",
        "pressure": "Pressure",
        "uv_index": "UV Index",
        "visibility": "Visibility",
        "air_quality": "Air Quality",

        # Air quality levels
        "aqi_good": "Good",
        "aqi_fair": "Fair",
        "aqi_moderate": "Moderate",
        "aqi_poor": "Poor",
        "aqi_very_poor": "Very Poor",
        "aqi_ext_poor": "Ext Poor",

        # Weather display
        "feels_like": "Feels Like",
        "last_refresh": "Last refresh",

        # Day names (short)
        "mon": "Mon",
        "tue": "Tue",
        "wed": "Wed",
        "thu": "Thu",
        "fri": "Fri",
        "sat": "Sat",
        "sun": "Sun",

        # Month names
        "january": "January",
        "february": "February",
        "march": "March",
        "april": "April",
        "may": "May",
        "june": "June",
        "july": "July",
        "august": "August",
        "september": "September",
        "october": "October",
        "november": "November",
        "december": "December",

        # Full day names
        "monday": "Monday",
        "tuesday": "Tuesday",
        "wednesday": "Wednesday",
        "thursday": "Thursday",
        "friday": "Friday",
        "saturday": "Saturday",
        "sunday": "Sunday",
    },

    "de": {
        # Data point labels
        "sunrise": "Sonnenaufgang",
        "sunset": "Sonnenuntergang",
        "wind": "Wind",
        "humidity": "Feuchtigkeit",
        "pressure": "Luftdruck",
        "uv_index": "UV-Index",
        "visibility": "Sichtweite",
        "air_quality": "Luftqualität",

        # Air quality levels
        "aqi_good": "Gut",
        "aqi_fair": "Mäßig",
        "aqi_moderate": "Mittel",
        "aqi_poor": "Schlecht",
        "aqi_very_poor": "Sehr schlecht",
        "aqi_ext_poor": "Extrem",

        # Weather display
        "feels_like": "Gefühlt",
        "last_refresh": "Aktualisiert",

        # Day names (short)
        "mon": "Mo",
        "tue": "Di",
        "wed": "Mi",
        "thu": "Do",
        "fri": "Fr",
        "sat": "Sa",
        "sun": "So",

        # Month names
        "january": "Januar",
        "february": "Februar",
        "march": "März",
        "april": "April",
        "may": "Mai",
        "june": "Juni",
        "july": "Juli",
        "august": "August",
        "september": "September",
        "october": "Oktober",
        "november": "November",
        "december": "Dezember",

        # Full day names
        "monday": "Montag",
        "tuesday": "Dienstag",
        "wednesday": "Mittwoch",
        "thursday": "Donnerstag",
        "friday": "Freitag",
        "saturday": "Samstag",
        "sunday": "Sonntag",
    },

    "fr": {
        # Data point labels
        "sunrise": "Lever du soleil",
        "sunset": "Coucher du soleil",
        "wind": "Vent",
        "humidity": "Humidité",
        "pressure": "Pression",
        "uv_index": "Indice UV",
        "visibility": "Visibilité",
        "air_quality": "Qualité de l'air",

        # Air quality levels
        "aqi_good": "Bon",
        "aqi_fair": "Acceptable",
        "aqi_moderate": "Modéré",
        "aqi_poor": "Mauvais",
        "aqi_very_poor": "Très mauvais",
        "aqi_ext_poor": "Extrême",

        # Weather display
        "feels_like": "Ressenti",
        "last_refresh": "Mise à jour",

        # Day names (short)
        "mon": "Lun",
        "tue": "Mar",
        "wed": "Mer",
        "thu": "Jeu",
        "fri": "Ven",
        "sat": "Sam",
        "sun": "Dim",

        # Month names
        "january": "Janvier",
        "february": "Février",
        "march": "Mars",
        "april": "Avril",
        "may": "Mai",
        "june": "Juin",
        "july": "Juillet",
        "august": "Août",
        "september": "Septembre",
        "october": "Octobre",
        "november": "Novembre",
        "december": "Décembre",

        # Full day names
        "monday": "Lundi",
        "tuesday": "Mardi",
        "wednesday": "Mercredi",
        "thursday": "Jeudi",
        "friday": "Vendredi",
        "saturday": "Samedi",
        "sunday": "Dimanche",
    },

    "ru": {
        # Data point labels
        "sunrise": "Восход",
        "sunset": "Закат",
        "wind": "Ветер",
        "humidity": "Влажность",
        "pressure": "Давление",
        "uv_index": "УФ-индекс",
        "visibility": "Видимость",
        "air_quality": "Кач.возд",

        # Air quality levels
        "aqi_good": "Хорошее",
        "aqi_fair": "Умеренное",
        "aqi_moderate": "Среднее",
        "aqi_poor": "Плохое",
        "aqi_very_poor": "Очень плохое",
        "aqi_ext_poor": "Опасное",

        # Weather display
        "feels_like": "Ощущается",
        "last_refresh": "Обновлено",

        # Day names (short)
        "mon": "Пн",
        "tue": "Вт",
        "wed": "Ср",
        "thu": "Чт",
        "fri": "Пт",
        "sat": "Сб",
        "sun": "Вс",

        # Month names
        "january": "Январь",
        "february": "Февраль",
        "march": "Март",
        "april": "Апрель",
        "may": "Май",
        "june": "Июнь",
        "july": "Июль",
        "august": "Август",
        "september": "Сентябрь",
        "october": "Октябрь",
        "november": "Ноябрь",
        "december": "Декабрь",

        # Full day names
        "monday": "Понедельник",
        "tuesday": "Вторник",
        "wednesday": "Среда",
        "thursday": "Четверг",
        "friday": "Пятница",
        "saturday": "Суббота",
        "sunday": "Воскресенье",
    }
}

# Mapping from English day abbreviations to translation keys
DAY_KEY_MAP = {
    "Mon": "mon",
    "Tue": "tue",
    "Wed": "wed",
    "Thu": "thu",
    "Fri": "fri",
    "Sat": "sat",
    "Sun": "sun"
}

# Mapping from English month names to translation keys
MONTH_KEY_MAP = {
    "January": "january",
    "February": "february",
    "March": "march",
    "April": "april",
    "May": "may",
    "June": "june",
    "July": "july",
    "August": "august",
    "September": "september",
    "October": "october",
    "November": "november",
    "December": "december"
}

# Mapping from English full day names to translation keys
FULL_DAY_KEY_MAP = {
    "Monday": "monday",
    "Tuesday": "tuesday",
    "Wednesday": "wednesday",
    "Thursday": "thursday",
    "Friday": "friday",
    "Saturday": "saturday",
    "Sunday": "sunday"
}

# AQI level mapping (index 0-5)
AQI_KEYS = ["aqi_good", "aqi_fair", "aqi_moderate", "aqi_poor", "aqi_very_poor", "aqi_ext_poor"]


def get_translation(lang: str, key: str) -> str:
    """Get a translation for the given language and key.
    Falls back to English if the language or key is not found.
    """
    if lang not in TRANSLATIONS:
        lang = "en"

    translations = TRANSLATIONS[lang]
    return translations.get(key, TRANSLATIONS["en"].get(key, key))


def get_aqi_label(lang: str, aqi_index: int) -> str:
    """Get the localized AQI label for the given index (0-5)."""
    if aqi_index < 0:
        aqi_index = 0
    if aqi_index > 5:
        aqi_index = 5
    return get_translation(lang, AQI_KEYS[aqi_index])


def translate_day(lang: str, day_abbrev: str) -> str:
    """Translate a day abbreviation (e.g., 'Mon') to the target language."""
    key = DAY_KEY_MAP.get(day_abbrev)
    if key:
        return get_translation(lang, key)
    return day_abbrev


def translate_date(lang: str, date_str: str) -> str:
    """Translate a date string like 'Monday, January 15' to the target language."""
    result = date_str

    # Replace full day names
    for eng_day, key in FULL_DAY_KEY_MAP.items():
        if eng_day in result:
            result = result.replace(eng_day, get_translation(lang, key))
            break

    # Replace month names
    for eng_month, key in MONTH_KEY_MAP.items():
        if eng_month in result:
            result = result.replace(eng_month, get_translation(lang, key))
            break

    return result


def get_time_format(lang: str) -> str:
    """Get the preferred time format for the given language.
    Returns '12h' or '24h'. Defaults to '12h' if language not found.
    """
    return TIME_FORMATS.get(lang, "12h")
