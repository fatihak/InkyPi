/*! Cropper.js v2.1.0 | (c) 2015-present Chen Fengyuan | MIT */ !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Cropper={})}(this,function(t){"use strict";let e="undefined"!=typeof window&&void 0!==window.document,i=e?window:{},s=!!e&&"ontouchstart"in i.document.documentElement,n=!!e&&"PointerEvent"in i,a="cropper",o=`${a}-canvas`,r=`${a}-crosshair`,h=`${a}-grid`,l=`${a}-handle`,c=`${a}-image`,d=`${a}-selection`,u=`${a}-shade`,p=`${a}-viewer`,g="select",m="move",b="scale",f="rotate",$="transform",v="none",C="n-resize",w="e-resize",y="s-resize",E="w-resize",S="ne-resize",A="nw-resize",_="se-resize",T="sw-resize",k="action",x=s?"touchend touchcancel":"mouseup",N=s?"touchmove":"mousemove",R=s?"touchstart":"mousedown",O=n?"pointerdown":R,I=n?"pointermove":N,z=n?"pointerup pointercancel":x,P="error",D="keydown",L="load",Y="wheel",X="action",W="actionend",H="actionmove",M="actionstart",V="change",U="transform";function q(t){return"string"==typeof t}let B=Number.isNaN||i.isNaN;function K(t){return"number"==typeof t&&!B(t)}function Z(t){return K(t)&&t>0&&t<1/0}function j(t){return void 0===t}function F(t){return"object"==typeof t&&null!==t}let{hasOwnProperty:G}=Object.prototype;function J(t){if(!F(t))return!1;try{let{constructor:e}=t,{prototype:i}=e;return e&&i&&G.call(i,"isPrototypeOf")}catch(s){return!1}}function Q(t){return"function"==typeof t}function tt(t){return"object"==typeof t&&null!==t&&1===t.nodeType}let te=/([a-z\d])([A-Z])/g;function ti(t){return String(t).replace(te,"$1-$2").toLowerCase()}let ts=/-[A-z\d]/g;function tn(t){return t.replace(ts,t=>t.slice(1).toUpperCase())}let ta=/\s\s*/;function to(t,e,i,s){e.trim().split(ta).forEach(e=>{t.removeEventListener(e,i,s)})}function tr(t,e,i,s){e.trim().split(ta).forEach(e=>{t.addEventListener(e,i,s)})}function th(t,e,i,s){tr(t,e,i,Object.assign(Object.assign({},s),{once:!0}))}let tl={bubbles:!0,cancelable:!0,composed:!0};function tc(t,e,i,s){return t.dispatchEvent(new CustomEvent(e,Object.assign(Object.assign(Object.assign({},tl),{detail:i}),s)))}function td(t){if("function"==typeof t.composedPath){let e=t.composedPath();return e.find(tt)||t.target}return t.target}let tu=Promise.resolve();function t9(t,e){return e?tu.then(t?e.bind(t):e):tu}function tp(t){let e=t.getRootNode();switch(e.nodeType){case 1:return e.ownerDocument;case 9:case 11:return e}return null}function tg(t){let{documentElement:e}=t.ownerDocument,s=t.getBoundingClientRect();return{left:s.left+(i.pageXOffset-e.clientLeft),top:s.top+(i.pageYOffset-e.clientTop)}}let tm=/deg|g?rad|turn$/i;function tb(t){let e=parseFloat(t)||0;if(0!==e){let[i="rad"]=String(t).match(tm)||[];switch(i.toLowerCase()){case"deg":return e/360*(2*Math.PI);case"grad":return e/400*(2*Math.PI);case"turn":return e*(2*Math.PI)}}return e}let tf="contain";function t$(t,e=tf){let{aspectRatio:i}=t,{width:s,height:n}=t,a=Z(s),o=Z(n);if(a&&o){let r=n*i;e===tf&&r>s||"cover"===e&&r<s?n=s/i:s=n*i}else a?n=s/i:o&&(s=n*i);return{width:s,height:n}}function tv(t,...e){if(0===e.length)return t;let[i,s,n,a,o,r]=t,[h,l,c,d,u,p]=e[0];return tv(t=[i*h+n*l,s*h+a*l,i*c+n*d,s*c+a*d,i*u+n*p+o,s*u+a*p+r,],...e.slice(1))}let tC=/left|top|width|height/i,tw="open",ty=new WeakMap,tE=new WeakMap,tS=new Map,tA=i.document&&Array.isArray(i.document.adoptedStyleSheets)&&"replaceSync"in i.CSSStyleSheet.prototype;class t_ extends HTMLElement{get $sharedStyle(){return`${this.themeColor?`:host{--theme-color: ${this.themeColor};}`:""}:host([hidden]){display:none!important}`}constructor(){var t,e;super(),this.shadowRootMode=tw,this.slottable=!0;let i=null===(e=null===(t=Object.getPrototypeOf(this))||void 0===t?void 0:t.constructor)||void 0===e?void 0:e.$name;i&&tS.set(i,this.tagName.toLowerCase())}static get observedAttributes(){return["shadow-root-mode","slottable","theme-color",]}attributeChangedCallback(t,e,i){if(Object.is(i,e))return;let s=tn(t),n=this[s],a=i;switch(typeof n){case"boolean":a=null!==i&&"false"!==i;break;case"number":a=Number(i)}if(this[s]=a,"theme-color"===t){let o=tE.get(this),r=this.$sharedStyle;o&&r&&(tA?o.replaceSync(r):o.textContent=r)}}$propertyChangedCallback(t,e,i){if(!Object.is(i,e))switch(t=ti(t),typeof i){case"boolean":!0===i?this.hasAttribute(t)||this.setAttribute(t,""):this.removeAttribute(t);break;case"number":i=B(i)?"":String(i);default:i?this.getAttribute(t)!==i&&this.setAttribute(t,i):this.removeAttribute(t)}}connectedCallback(){Object.getPrototypeOf(this).constructor.observedAttributes.forEach(t=>{let e=tn(t),i=this[e];j(i)||this.$propertyChangedCallback(e,void 0,i),Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:()=>i,set(t){let s=i;i=t,this.$propertyChangedCallback(e,s,t)}})});let t=this.shadowRoot||this.attachShadow({mode:this.shadowRootMode||tw});if(ty.set(this,t),tE.set(this,this.$addStyles(this.$sharedStyle)),this.$style&&this.$addStyles(this.$style),this.$template){let e=document.createElement("template");e.innerHTML=this.$template,t.appendChild(e.content)}if(this.slottable){let i=document.createElement("slot");t.appendChild(i)}}disconnectedCallback(){tE.has(this)&&tE.delete(this),ty.has(this)&&ty.delete(this)}$getTagNameOf(t){var e;return null!==(e=tS.get(t))&&void 0!==e?e:t}$setStyles(t){return Object.keys(t).forEach(e=>{let i=t[e];K(i)&&(i=0!==i&&tC.test(e)?`${i}px`:String(i)),this.style[e]=i}),this}$getShadowRoot(){return this.shadowRoot||ty.get(this)}$addStyles(t){let e,i=this.$getShadowRoot();return tA?((e=new CSSStyleSheet).replaceSync(t),i.adoptedStyleSheets=i.adoptedStyleSheets.concat(e)):((e=document.createElement("style")).textContent=t,i.appendChild(e)),e}$emit(t,e,i){return tc(this,t,e,i)}$nextTick(t){return t9(this,t)}static $define(t,s){F(t)&&(s=t,t=""),t||(t=this.$name||this.name),t=ti(t),e&&i.customElements&&!i.customElements.get(t)&&customElements.define(t,this,s)}}t_.$version="2.1.0";class tT extends t_{constructor(){super(...arguments),this.$onPointerDown=null,this.$onPointerMove=null,this.$onPointerUp=null,this.$onWheel=null,this.$wheeling=!1,this.$pointers=new Map,this.$style=':host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:"";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}',this.$action=v,this.background=!1,this.disabled=!1,this.scaleStep=.1,this.themeColor="#39f"}static get observedAttributes(){return super.observedAttributes.concat(["background","disabled","scale-step",])}connectedCallback(){super.connectedCallback(),this.disabled||this.$bind()}disconnectedCallback(){this.disabled||this.$unbind(),super.disconnectedCallback()}$propertyChangedCallback(t,e,i){!Object.is(i,e)&&(super.$propertyChangedCallback(t,e,i),"disabled"===t&&(i?this.$unbind():this.$bind()))}$bind(){this.$onPointerDown||(this.$onPointerDown=this.$handlePointerDown.bind(this),tr(this,O,this.$onPointerDown)),this.$onPointerMove||(this.$onPointerMove=this.$handlePointerMove.bind(this),tr(this.ownerDocument,I,this.$onPointerMove)),this.$onPointerUp||(this.$onPointerUp=this.$handlePointerUp.bind(this),tr(this.ownerDocument,z,this.$onPointerUp)),this.$onWheel||(this.$onWheel=this.$handleWheel.bind(this),tr(this,Y,this.$onWheel,{passive:!1,capture:!0}))}$unbind(){this.$onPointerDown&&(to(this,O,this.$onPointerDown),this.$onPointerDown=null),this.$onPointerMove&&(to(this.ownerDocument,I,this.$onPointerMove),this.$onPointerMove=null),this.$onPointerUp&&(to(this.ownerDocument,z,this.$onPointerUp),this.$onPointerUp=null),this.$onWheel&&(to(this,Y,this.$onWheel,{capture:!0}),this.$onWheel=null)}$handlePointerDown(t){let{buttons:e,button:i,type:s}=t;if(this.disabled||("pointerdown"===s&&"mouse"===t.pointerType||"mousedown"===s)&&(K(e)&&1!==e||K(i)&&0!==i||t.ctrlKey))return;let{$pointers:n}=this,a="";if(t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:t,pageX:e,pageY:i})=>{n.set(t,{startX:e,startY:i,endX:e,endY:i})});else{let{pointerId:o=0,pageX:r,pageY:h}=t;n.set(o,{startX:r,startY:h,endX:r,endY:h})}n.size>1?a=$:tt(t.target)&&(a=t.target.action||t.target.getAttribute(k)||""),!1!==this.$emit(M,{action:a,relatedEvent:t})&&(t.preventDefault(),this.$action=a,this.style.willChange="transform")}$handlePointerMove(t){let{$action:e,$pointers:i}=this;if(this.disabled||e===v||0===i.size||!1===this.$emit(H,{action:e,relatedEvent:t}))return;if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:t,pageX:e,pageY:s})=>{let n=i.get(t);n&&Object.assign(n,{endX:e,endY:s})});else{let{pointerId:s=0,pageX:n,pageY:a}=t,o=i.get(s);o&&Object.assign(o,{endX:n,endY:a})}let r={action:e,relatedEvent:t};if(e===$){let h=new Map(i),l=0,c=0,d=0,u=0,p=t.pageX,g=t.pageY;i.forEach((t,e)=>{h.delete(e),h.forEach(e=>{let i=e.startX-t.startX,s=e.startY-t.startY,n=e.endX-t.endX,a=e.endY-t.endY,o=0,r=0,h=0,m=0;if(0===i?s<0?h=2*Math.PI:s>0&&(h=Math.PI):i>0?h=Math.PI/2+Math.atan(s/i):i<0&&(h=1.5*Math.PI+Math.atan(s/i)),0===n?a<0?m=2*Math.PI:a>0&&(m=Math.PI):n>0?m=Math.PI/2+Math.atan(a/n):n<0&&(m=1.5*Math.PI+Math.atan(a/n)),m>0||h>0){let b=m-h,f=Math.abs(b);f>l&&(l=f,d=b,p=(t.startX+e.startX)/2,g=(t.startY+e.startY)/2)}if(i=Math.abs(i),s=Math.abs(s),n=Math.abs(n),a=Math.abs(a),i>0&&s>0?o=Math.sqrt(i*i+s*s):i>0?o=i:s>0&&(o=s),n>0&&a>0?r=Math.sqrt(n*n+a*a):n>0?r=n:a>0&&(r=a),o>0&&r>0){let $=(r-o)/o,v=Math.abs($);v>c&&(c=v,u=$,p=(t.startX+e.startX)/2,g=(t.startY+e.startY)/2)}})});let m=l>0,C=c>0;m&&C?(r.rotate=d,r.scale=u,r.centerX=p,r.centerY=g):m?(r.action=f,r.rotate=d,r.centerX=p,r.centerY=g):C?(r.action=b,r.scale=u,r.centerX=p,r.centerY=g):r.action=v}else{let[w]=Array.from(i.values());Object.assign(r,w)}i.forEach(t=>{t.startX=t.endX,t.startY=t.endY}),r.action!==v&&this.$emit(X,r,{cancelable:!1})}$handlePointerUp(t){let{$action:e,$pointers:i}=this;if(!this.disabled&&e!==v&&!1!==this.$emit(W,{action:e,relatedEvent:t})){if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:t})=>{i.delete(t)});else{let{pointerId:s=0}=t;i.delete(s)}0===i.size&&(this.style.willChange="",this.$action=v)}}$handleWheel(t){if(this.disabled||(t.preventDefault(),this.$wheeling))return;this.$wheeling=!0,setTimeout(()=>{this.$wheeling=!1},50);let e=t.deltaY>0?-1:1,i=e*this.scaleStep;this.$emit(X,{action:b,scale:i,relatedEvent:t},{cancelable:!1})}$setAction(t){return q(t)&&(this.$action=t),this}$toCanvas(t){return new Promise((e,i)=>{if(!this.isConnected){i(Error("The current element is not connected to the DOM."));return}let s=document.createElement("canvas"),n=this.offsetWidth,a=this.offsetHeight,o=1;J(t)&&(Z(t.width)||Z(t.height))&&({width:n,height:a}=t$({aspectRatio:n/a,width:t.width,height:t.height}),o=n/this.offsetWidth),s.width=n,s.height=a;let r=this.querySelector(this.$getTagNameOf(c));if(!r){e(s);return}r.$ready().then(i=>{let h=s.getContext("2d");if(h){let[l,c,d,u,p,g]=r.$getTransform(),m=p,b=g,f=i.naturalWidth,$=i.naturalHeight;1!==o&&(m*=o,b*=o,f*=o,$*=o);let v=f/2,C=$/2;h.fillStyle="transparent",h.fillRect(0,0,n,a),J(t)&&Q(t.beforeDraw)&&t.beforeDraw.call(this,h,s),h.save(),h.translate(v,C),h.transform(l,c,d,u,m,b),h.translate(-v,-C),h.drawImage(i,0,0,f,$),h.restore()}e(s)}).catch(i)})}}tT.$name=o,tT.$version="2.1.0";let tk=new WeakMap,tx=["alt","crossorigin","decoding","elementtiming","fetchpriority","loading","referrerpolicy","sizes","src","srcset",];class tN extends t_{constructor(){super(...arguments),this.$matrix=[1,0,0,1,0,0],this.$onLoad=null,this.$onCanvasAction=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$actionStartTarget=null,this.$style=":host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}",this.$image=new Image,this.initialCenterSize="contain",this.rotatable=!1,this.scalable=!1,this.skewable=!1,this.slottable=!1,this.translatable=!1,this.alt="",this.crossorigin="",this.decoding="",this.elementtiming="",this.fetchpriority="",this.loading="",this.referrerpolicy="",this.sizes="",this.src="",this.srcset=""}set $canvas(t){tk.set(this,t)}get $canvas(){return tk.get(this)}static get observedAttributes(){return super.observedAttributes.concat(tx,["initial-center-size","rotatable","scalable","skewable","translatable",])}attributeChangedCallback(t,e,i){!Object.is(i,e)&&(super.attributeChangedCallback(t,e,i),tx.includes(t)&&this.$image.setAttribute(t,i))}$propertyChangedCallback(t,e,i){!Object.is(i,e)&&(super.$propertyChangedCallback(t,e,i),"initialCenterSize"===t&&this.$nextTick(()=>{this.$center(i)}))}connectedCallback(){super.connectedCallback();let{$image:t}=this,e=this.closest(this.$getTagNameOf(o));e&&(this.$canvas=e,this.$setStyles({display:"block",position:"absolute"}),this.$onCanvasActionStart=t=>{var e,i;this.$actionStartTarget=null===(i=null===(e=t.detail)||void 0===e?void 0:e.relatedEvent)||void 0===i?void 0:i.target},this.$onCanvasActionEnd=()=>{this.$actionStartTarget=null},this.$onCanvasAction=this.$handleAction.bind(this),tr(e,M,this.$onCanvasActionStart),tr(e,W,this.$onCanvasActionEnd),tr(e,X,this.$onCanvasAction)),this.$onLoad=this.$handleLoad.bind(this),tr(t,L,this.$onLoad),this.$getShadowRoot().appendChild(t)}disconnectedCallback(){let{$image:t,$canvas:e}=this;e&&(this.$onCanvasActionStart&&(to(e,M,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(to(e,W,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(to(e,X,this.$onCanvasAction),this.$onCanvasAction=null)),t&&this.$onLoad&&(to(t,L,this.$onLoad),this.$onLoad=null),this.$getShadowRoot().removeChild(t),super.disconnectedCallback()}$handleLoad(){let{$image:t}=this;this.$setStyles({width:t.naturalWidth,height:t.naturalHeight}),this.$canvas&&this.$center(this.initialCenterSize)}$handleAction(t){if(this.hidden||!(this.rotatable||this.scalable||this.translatable))return;let{$canvas:e}=this,{detail:i}=t;if(i){let{relatedEvent:s}=i,{action:n}=i;switch(n!==$||this.rotatable&&this.scalable||(n=this.rotatable?f:this.scalable?b:v),n){case m:if(this.translatable){let a=null;s&&(a=s.target.closest(this.$getTagNameOf(d))),a||(a=e.querySelector(this.$getTagNameOf(d))),a&&a.multiple&&!a.active&&(a=e.querySelector(`${this.$getTagNameOf(d)}[active]`)),a&&!a.hidden&&a.movable&&!a.dynamic&&this.$actionStartTarget&&a.contains(this.$actionStartTarget)||this.$move(i.endX-i.startX,i.endY-i.startY)}break;case f:if(this.rotatable){if(s){let{x:o,y:r}=this.getBoundingClientRect();this.$rotate(i.rotate,s.clientX-o,s.clientY-r)}else this.$rotate(i.rotate)}break;case b:if(this.scalable){if(s){let h=s.target.closest(this.$getTagNameOf(d));if(!h||!h.zoomable||h.zoomable&&h.dynamic){let{x:l,y:c}=this.getBoundingClientRect();this.$zoom(i.scale,s.clientX-l,s.clientY-c)}}else this.$zoom(i.scale)}break;case $:if(this.rotatable&&this.scalable){let{rotate:u}=i,{scale:p}=i;p<0?p=1/(1-p):p+=1;let g=Math.cos(u),C=Math.sin(u),[w,y,E,S]=[g*p,C*p,-C*p,g*p,];if(s){let A=this.getBoundingClientRect(),_=s.clientX-A.x,T=s.clientY-A.y,[k,x,N,R]=this.$matrix,O=A.width/2,I=A.height/2,z=_-O,P=T-I,D=(z*R-N*P)/(k*R-N*x),L=(P*k-x*z)/(k*R-N*x);this.$transform(w,y,E,S,D*(1-w)+L*E,L*(1-S)+D*y)}else this.$transform(w,y,E,S,0,0)}}}}$ready(t){let{$image:e}=this,i=new Promise((t,i)=>{let s=Error("Failed to load the image source");if(e.complete)e.naturalWidth>0&&e.naturalHeight>0?t(e):i(s);else{let n=()=>{to(e,P,a),setTimeout(()=>{t(e)})},a=()=>{to(e,L,n),i(s)};th(e,L,n),th(e,P,a)}});return Q(t)&&i.then(e=>(t(e),e)),i}$center(t){let{parentElement:e}=this;if(!e)return this;let i=e.getBoundingClientRect(),s=i.width,n=i.height,{x:a,y:o,width:r,height:h}=this.getBoundingClientRect(),l=i.x+s/2,c=i.y+n/2;if(this.$move(l-(a+r/2),c-(o+h/2)),t&&(r!==s||h!==n)){let d=s/r,u=n/h;switch(t){case"cover":this.$scale(Math.max(d,u));break;case"contain":this.$scale(Math.min(d,u))}}return this}$move(t,e=t){if(this.translatable&&K(t)&&K(e)){let[i,s,n,a]=this.$matrix;this.$translate((t*a-n*e)/(i*a-n*s),(e*i-s*t)/(i*a-n*s))}return this}$moveTo(t,e=t){if(this.translatable&&K(t)&&K(e)){let[i,s,n,a]=this.$matrix;this.$setTransform(i,s,n,a,(t*a-n*e)/(i*a-n*s),(e*i-s*t)/(i*a-n*s))}return this}$rotate(t,e,i){if(this.rotatable){let s=tb(t),n=Math.cos(s),a=Math.sin(s),[o,r,h,l]=[n,a,-a,n];if(K(e)&&K(i)){let[c,d,u,p]=this.$matrix,{width:g,height:m}=this.getBoundingClientRect(),b=e-g/2,f=i-m/2,$=(b*p-u*f)/(c*p-u*d),v=(f*c-d*b)/(c*p-u*d);this.$transform(o,r,h,l,$*(1-o)-v*h,v*(1-l)-$*r)}else this.$transform(o,r,h,l,0,0)}return this}$zoom(t,e,i){if(!this.scalable||0===t)return this;if(t<0?t=1/(1-t):t+=1,K(e)&&K(i)){let[s,n,a,o]=this.$matrix,{width:r,height:h}=this.getBoundingClientRect(),l=e-r/2,c=i-h/2;this.$transform(t,0,0,t,(l*o-a*c)/(s*o-a*n)*(1-t),(c*s-n*l)/(s*o-a*n)*(1-t))}else this.$scale(t);return this}$scale(t,e=t){return this.scalable&&this.$transform(t,0,0,e,0,0),this}$skew(t,e=0){if(this.skewable){let i=tb(t),s=tb(e);this.$transform(1,Math.tan(s),Math.tan(i),1,0,0)}return this}$translate(t,e=t){return this.translatable&&K(t)&&K(e)&&this.$transform(1,0,0,1,t,e),this}$transform(t,e,i,s,n,a){return K(t)&&K(e)&&K(i)&&K(s)&&K(n)&&K(a)?this.$setTransform(tv(this.$matrix,[t,e,i,s,n,a])):this}$setTransform(t,e,i,s,n,a){if((this.rotatable||this.scalable||this.skewable||this.translatable)&&(Array.isArray(t)&&([t,e,i,s,n,a]=t),K(t)&&K(e)&&K(i)&&K(s)&&K(n)&&K(a))){let o=[...this.$matrix],r=[t,e,i,s,n,a];if(!1===this.$emit(U,{matrix:r,oldMatrix:o}))return this;this.$matrix=r,this.style.transform=`matrix(${r.join(", ")})`}return this}$getTransform(){return this.$matrix.slice()}$resetTransform(){return this.$setTransform([1,0,0,1,0,0])}}tN.$name=c,tN.$version="2.1.0";let tR=new WeakMap;class tO extends t_{constructor(){super(...arguments),this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$onSelectionChange=null,this.$style=":host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}",this.x=0,this.y=0,this.width=0,this.height=0,this.slottable=!1,this.themeColor="rgba(0, 0, 0, 0.65)"}set $canvas(t){tR.set(this,t)}get $canvas(){return tR.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["height","width","x","y",])}connectedCallback(){super.connectedCallback();let t=this.closest(this.$getTagNameOf(o));if(t){this.$canvas=t,this.style.position="absolute";let e=t.querySelector(this.$getTagNameOf(d));e&&(this.$onCanvasActionStart=t=>{e.hidden&&t.detail.action===g&&(this.hidden=!1)},this.$onCanvasActionEnd=t=>{e.hidden&&t.detail.action===g&&(this.hidden=!0)},this.$onSelectionChange=t=>{let{x:i,y:s,width:n,height:a}=t.defaultPrevented?e:t.detail;this.$change(i,s,n,a),(e.hidden||0===i&&0===s&&0===n&&0===a)&&(this.hidden=!0)},tr(t,M,this.$onCanvasActionStart),tr(t,W,this.$onCanvasActionEnd),tr(t,V,this.$onSelectionChange))}this.$render()}disconnectedCallback(){let{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(to(t,M,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(to(t,W,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onSelectionChange&&(to(t,V,this.$onSelectionChange),this.$onSelectionChange=null)),super.disconnectedCallback()}$change(t,e,i=this.width,s=this.height){return K(t)&&K(e)&&K(i)&&K(s)&&(t!==this.x||e!==this.y||i!==this.width||s!==this.height)?(this.hidden&&(this.hidden=!1),this.x=t,this.y=e,this.width=i,this.height=s,this.$render()):this}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:i.innerWidth})}}tO.$name=u,tO.$version="2.1.0";class tI extends t_{constructor(){super(...arguments),this.$onCanvasCropEnd=null,this.$onCanvasCropStart=null,this.$style=':host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:"";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}',this.action=v,this.plain=!1,this.slottable=!1,this.themeColor="rgba(51, 153, 255, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["action","plain",])}}tI.$name=l,tI.$version="2.1.0";let tz=new WeakMap;class tP extends t_{constructor(){super(...arguments),this.$onCanvasAction=null,this.$onCanvasActionStart=null,this.$onCanvasActionEnd=null,this.$onDocumentKeyDown=null,this.$action="",this.$actionStartTarget=null,this.$changing=!1,this.$style=':host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:"";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}',this.$initialSelection={x:0,y:0,width:0,height:0},this.x=0,this.y=0,this.width=0,this.height=0,this.aspectRatio=NaN,this.initialAspectRatio=NaN,this.initialCoverage=NaN,this.active=!1,this.linked=!1,this.dynamic=!1,this.movable=!1,this.resizable=!1,this.zoomable=!1,this.multiple=!1,this.keyboard=!1,this.outlined=!1,this.precise=!1}set $canvas(t){tz.set(this,t)}get $canvas(){return tz.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["active","aspect-ratio","dynamic","height","initial-aspect-ratio","initial-coverage","keyboard","linked","movable","multiple","outlined","precise","resizable","width","x","y","zoomable",])}$propertyChangedCallback(t,e,i){if(!Object.is(i,e))switch(super.$propertyChangedCallback(t,e,i),t){case"x":case"y":case"width":case"height":this.$changing||this.$nextTick(()=>{this.$change(this.x,this.y,this.width,this.height,this.aspectRatio,!0)});break;case"aspectRatio":case"initialAspectRatio":this.$nextTick(()=>{this.$initSelection()});break;case"initialCoverage":this.$nextTick(()=>{Z(i)&&i<=1&&this.$initSelection(!0,!0)});break;case"keyboard":this.$nextTick(()=>{this.$canvas&&(i?this.$onDocumentKeyDown||(this.$onDocumentKeyDown=this.$handleKeyDown.bind(this),tr(this.ownerDocument,D,this.$onDocumentKeyDown)):this.$onDocumentKeyDown&&(to(this.ownerDocument,D,this.$onDocumentKeyDown),this.$onDocumentKeyDown=null))});break;case"multiple":this.$nextTick(()=>{if(this.$canvas){let t=this.$getSelections();i?(t.forEach(t=>{t.active=!1}),this.active=!0,this.$emit(V,{x:this.x,y:this.y,width:this.width,height:this.height})):(this.active=!1,t.slice(1).forEach(t=>{this.$removeSelection(t)}))}});break;case"precise":this.$nextTick(()=>{this.$change(this.x,this.y)});break;case"linked":i&&(this.dynamic=!0)}}connectedCallback(){super.connectedCallback();let t=this.closest(this.$getTagNameOf(o));t?(this.$canvas=t,this.$setStyles({position:"absolute",transform:`translate(${this.x}px, ${this.y}px)`}),this.hidden||this.$render(),this.$initSelection(!0),this.$onCanvasActionStart=this.$handleActionStart.bind(this),this.$onCanvasActionEnd=this.$handleActionEnd.bind(this),this.$onCanvasAction=this.$handleAction.bind(this),tr(t,M,this.$onCanvasActionStart),tr(t,W,this.$onCanvasActionEnd),tr(t,X,this.$onCanvasAction)):this.$render()}disconnectedCallback(){let{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(to(t,M,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(to(t,W,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(to(t,X,this.$onCanvasAction),this.$onCanvasAction=null)),super.disconnectedCallback()}$getSelections(){let t=[];return this.parentElement&&(t=Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(d)))),t}$initSelection(t=!1,e=!1){let{initialCoverage:i,parentElement:s}=this;if(Z(i)&&s){let n=this.aspectRatio||this.initialAspectRatio,a=(e?0:this.width)||s.offsetWidth*i,o=(e?0:this.height)||s.offsetHeight*i;Z(n)&&({width:a,height:o}=t$({aspectRatio:n,width:a,height:o})),this.$change(this.x,this.y,a,o),t&&this.$center(),this.$initialSelection={x:this.x,y:this.y,width:this.width,height:this.height}}}$createSelection(){let t=this.cloneNode(!0);return this.hasAttribute("id")&&t.removeAttribute("id"),t.initialCoverage=NaN,this.active=!1,this.parentElement&&this.parentElement.insertBefore(t,this.nextSibling),t}$removeSelection(t=this){if(this.parentElement){let e=this.$getSelections();if(e.length>1){let i=e.indexOf(t),s=e[i+1]||e[i-1];s&&(t.active=!1,this.parentElement.removeChild(t),s.active=!0,s.$emit(V,{x:s.x,y:s.y,width:s.width,height:s.height}))}else this.$clear()}}$handleActionStart(t){var e,i;let s=null===(i=null===(e=t.detail)||void 0===e?void 0:e.relatedEvent)||void 0===i?void 0:i.target;this.$action="",this.$actionStartTarget=s,!this.hidden&&this.multiple&&!this.active&&s===this&&this.parentElement&&(this.$getSelections().forEach(t=>{t.active=!1}),this.active=!0,this.$emit(V,{x:this.x,y:this.y,width:this.width,height:this.height}))}$handleAction(t){let{currentTarget:e,detail:i}=t;if(!e||!i)return;let{relatedEvent:s}=i,{action:n}=i,a=s?td(s):null;if(!n&&this.multiple&&(n=this.$action||(null==a?void 0:a.action),this.$action=n),!n||this.hidden&&n!==g||this.multiple&&!this.active&&n!==b)return;let{width:o,height:r}=this,h=i.endX-i.startX,l=i.endY-i.startY,{aspectRatio:c}=this;switch(!Z(c)&&s.shiftKey&&(c=Z(o)&&Z(r)?o/r:1),n){case g:if(0!==h||0!==l){0===h?h=l:0===l&&(l=h);let{$canvas:d}=this,u=tg(e);(this.multiple&&!this.hidden?this.$createSelection():this).$change(i.startX-u.left,i.startY-u.top,Math.abs(h),Math.abs(l),c),h<0?l<0?n=A:l>0&&(n=T):h>0&&(l<0?n=S:l>0&&(n=_)),d&&(d.$action=n)}break;case m:this.movable&&(this.dynamic||this.$actionStartTarget&&this.contains(this.$actionStartTarget))&&this.$move(h,l);break;case b:if(s&&this.zoomable&&(this.dynamic||this.contains(s.target))){let p=tg(e);this.$zoom(i.scale,s.pageX-p.left,s.pageY-p.top)}break;default:this.$resize(n,h,l,c)}}$handleActionEnd(){this.$action="",this.$actionStartTarget=null}$handleKeyDown(t){if(this.hidden||!this.keyboard||this.multiple&&!this.active||t.defaultPrevented)return;let{activeElement:e}=document;if(!(e&&(["INPUT","TEXTAREA"].includes(e.tagName)||["true","plaintext-only"].includes(e.contentEditable))))switch(t.key){case"Backspace":t.metaKey&&(t.preventDefault(),this.$removeSelection());break;case"Delete":t.preventDefault(),this.$removeSelection();break;case"ArrowLeft":t.preventDefault(),this.$move(-1,0);break;case"ArrowRight":t.preventDefault(),this.$move(1,0);break;case"ArrowUp":t.preventDefault(),this.$move(0,-1);break;case"ArrowDown":t.preventDefault(),this.$move(0,1);break;case"+":t.preventDefault(),this.$zoom(.1);break;case"-":t.preventDefault(),this.$zoom(-.1)}}$center(){let{parentElement:t}=this;if(!t)return this;let e=(t.offsetWidth-this.width)/2,i=(t.offsetHeight-this.height)/2;return this.$change(e,i)}$move(t,e=t){return this.$moveTo(this.x+t,this.y+e)}$moveTo(t,e=t){return this.movable?this.$change(t,e):this}$resize(t,e=0,i=0,s=this.aspectRatio){if(!this.resizable)return this;let n=Z(s),{$canvas:a}=this,{x:o,y:r,width:h,height:l}=this;switch(t){case C:r+=i,(l-=i)<0&&(t=y,r-=l=-l),n&&(o+=(e=i*s)/2,(h-=e)<0&&(o-=h=-h));break;case w:(h+=e)<0&&(t=E,o-=h=-h),n&&(r-=(i=e/s)/2,(l+=i)<0&&(r-=l=-l));break;case y:(l+=i)<0&&(t=C,r-=l=-l),n&&(o-=(e=i*s)/2,(h+=e)<0&&(o-=h=-h));break;case E:o+=e,(h-=e)<0&&(t=w,o-=h=-h),n&&(r+=(i=e/s)/2,(l-=i)<0&&(r-=l=-l));break;case S:n&&(i=-e/s),r+=i,l-=i,(h+=e)<0&&l<0?(t=T,l=-l,o-=h=-h,r-=l):h<0?(t=A,o-=h=-h):l<0&&(t=_,r-=l=-l);break;case A:n&&(i=e/s),o+=e,r+=i,h-=e,l-=i,h<0&&l<0?(t=_,l=-l,o-=h=-h,r-=l):h<0?(t=S,o-=h=-h):l<0&&(t=T,r-=l=-l);break;case _:n&&(i=e/s),h+=e,l+=i,h<0&&l<0?(t=A,l=-l,o-=h=-h,r-=l):h<0?(t=T,o-=h=-h):l<0&&(t=S,r-=l=-l);break;case T:n&&(i=-e/s),o+=e,h-=e,l+=i,h<0&&l<0?(t=S,l=-l,o-=h=-h,r-=l):h<0?(t=_,o-=h=-h):l<0&&(t=A,r-=l=-l)}return a&&a.$setAction(t),this.$change(o,r,h,l)}$zoom(t,e,i){if(!this.zoomable||0===t)return this;t<0?t=1/(1-t):t+=1;let{width:s,height:n}=this,a=s*t,o=n*t,r=this.x,h=this.y;return K(e)&&K(i)?(r-=(a-s)*((e-this.x)/s),h-=(o-n)*((i-this.y)/n)):(r-=(a-s)/2,h-=(o-n)/2),this.$change(r,h,a,o)}$change(t,e,i=this.width,s=this.height,n=this.aspectRatio,a=!1){return!this.$changing&&K(t)&&K(e)&&K(i)&&K(s)&&!(i<0)&&!(s<0)?(Z(n)&&({width:i,height:s}=t$({aspectRatio:n,width:i,height:s},"cover")),this.precise||(t=Math.round(t),e=Math.round(e),i=Math.round(i),s=Math.round(s)),t===this.x&&e===this.y&&i===this.width&&s===this.height&&Object.is(n,this.aspectRatio)&&!a)?this:(this.hidden&&(this.hidden=!1),!1===this.$emit(V,{x:t,y:e,width:i,height:s}))?this:(this.$changing=!0,this.x=t,this.y=e,this.width=i,this.height=s,this.$changing=!1,this.$render()):this}$reset(){let{x:t,y:e,width:i,height:s}=this.$initialSelection;return this.$change(t,e,i,s)}$clear(){return this.$change(0,0,0,0,NaN,!0),this.hidden=!0,this}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height})}$toCanvas(t){return new Promise((e,i)=>{if(!this.isConnected){i(Error("The current element is not connected to the DOM."));return}let s=document.createElement("canvas"),{width:n,height:a}=this,o=1;if(J(t)&&(Z(t.width)||Z(t.height))&&({width:n,height:a}=t$({aspectRatio:n/a,width:t.width,height:t.height}),o=n/this.width),s.width=n,s.height=a,!this.$canvas){e(s);return}let r=this.$canvas.querySelector(this.$getTagNameOf(c));if(!r){e(s);return}r.$ready().then(i=>{let h=s.getContext("2d");if(h){let[l,c,d,u,p,g]=r.$getTransform(),m=-this.x,b=-this.y,f=(m*u-d*b)/(l*u-d*c),$=(b*l-c*m)/(l*u-d*c),v=l*f+d*$+p,C=c*f+u*$+g,w=i.naturalWidth,y=i.naturalHeight;1!==o&&(v*=o,C*=o,w*=o,y*=o);let E=w/2,S=y/2;h.fillStyle="transparent",h.fillRect(0,0,n,a),J(t)&&Q(t.beforeDraw)&&t.beforeDraw.call(this,h,s),h.save(),h.translate(E,S),h.transform(l,c,d,u,v,C),h.translate(-E,-S),h.drawImage(i,0,0,w,y),h.restore()}e(s)}).catch(i)})}}tP.$name=d,tP.$version="2.1.0";class tD extends t_{constructor(){super(...arguments),this.$style=":host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}",this.bordered=!1,this.columns=3,this.covered=!1,this.rows=3,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["bordered","columns","covered","rows",])}$propertyChangedCallback(t,e,i){!Object.is(i,e)&&(super.$propertyChangedCallback(t,e,i),("rows"===t||"columns"===t)&&this.$nextTick(()=>{this.$render()}))}connectedCallback(){super.connectedCallback(),this.$render()}$render(){let t=this.$getShadowRoot(),e=document.createDocumentFragment();for(let i=0;i<this.rows;i+=1){let s=document.createElement("span");s.setAttribute("role","row");for(let n=0;n<this.columns;n+=1){let a=document.createElement("span");a.setAttribute("role","gridcell"),s.appendChild(a)}e.appendChild(s)}t&&(t.innerHTML="",t.appendChild(e))}}tD.$name=h,tD.$version="2.1.0";class t8 extends t_{constructor(){super(...arguments),this.$style=':host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:"";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}',this.centered=!1,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["centered",])}}t8.$name=r,t8.$version="2.1.0";let t0=new WeakMap,t3=new WeakMap,tL=new WeakMap,tY=new WeakMap,tX="vertical";class tW extends t_{constructor(){super(...arguments),this.$onSelectionChange=null,this.$onSourceImageLoad=null,this.$onSourceImageTransform=null,this.$scale=1,this.$style=":host{display:block;height:100%;overflow:hidden;position:relative;width:100%}",this.resize=tX,this.selection="",this.slottable=!1}set $image(t){t3.set(this,t)}get $image(){return t3.get(this)}set $sourceImage(t){tY.set(this,t)}get $sourceImage(){return tY.get(this)}set $canvas(t){t0.set(this,t)}get $canvas(){return t0.get(this)}set $selection(t){tL.set(this,t)}get $selection(){return tL.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["resize","selection",])}connectedCallback(){var t,e;super.connectedCallback();let i=null;if(tt(i=this.selection?null!==(e=null===(t=tp(this))||void 0===t?void 0:t.querySelector(this.selection))&&void 0!==e?e:null:this.closest(this.$getTagNameOf(d)))){this.$selection=i,this.$onSelectionChange=this.$handleSelectionChange.bind(this),tr(i,V,this.$onSelectionChange);let s=i.closest(this.$getTagNameOf(o));if(s){this.$canvas=s;let n=s.querySelector(this.$getTagNameOf(c));n&&(this.$sourceImage=n,this.$image=n.cloneNode(!0),this.$getShadowRoot().appendChild(this.$image),this.$onSourceImageLoad=this.$handleSourceImageLoad.bind(this),this.$onSourceImageTransform=this.$handleSourceImageTransform.bind(this),tr(n.$image,L,this.$onSourceImageLoad),tr(n,U,this.$onSourceImageTransform))}this.$render()}}disconnectedCallback(){let{$selection:t,$sourceImage:e}=this;t&&this.$onSelectionChange&&(to(t,V,this.$onSelectionChange),this.$onSelectionChange=null),e&&this.$onSourceImageLoad&&(to(e.$image,L,this.$onSourceImageLoad),this.$onSourceImageLoad=null),e&&this.$onSourceImageTransform&&(to(e,U,this.$onSourceImageTransform),this.$onSourceImageTransform=null),super.disconnectedCallback()}$handleSelectionChange(t){this.$render(t.defaultPrevented?this.$selection:t.detail)}$handleSourceImageLoad(){let{$image:t,$sourceImage:e}=this,i=t.getAttribute("src"),s=e.getAttribute("src");s&&s!==i&&(t.setAttribute("src",s),t.$ready(()=>{this.$render()}))}$handleSourceImageTransform(t){this.$render(void 0,t.detail.matrix)}$render(t,e){let{$canvas:i,$selection:s}=this;t||s.hidden||(t=s),t&&(0!==t.x||0!==t.y||0!==t.width||0!==t.height)||(t={x:0,y:0,width:i.offsetWidth,height:i.offsetHeight});let{x:n,y:a,width:o,height:r}=t,h={},{clientWidth:l,clientHeight:c}=this,d=l,u=c,p=NaN;switch(this.resize){case"both":p=1,d=o,u=r,h.width=o,h.height=r;break;case"horizontal":d=o*(p=r>0?c/r:0),h.width=d;break;case tX:u=r*(p=o>0?l/o:0),h.height=u;break;default:l>0?p=o>0?l/o:0:c>0&&(p=r>0?c/r:0)}this.$scale=p,this.$setStyles(h),this.$sourceImage&&setTimeout(()=>{this.$transformImageByOffset(null!=e?e:this.$sourceImage.$getTransform(),-n,-a)})}$transformImageByOffset(t,e,i){let{$image:s,$scale:n,$sourceImage:a}=this;if(a&&s&&n>=0){let[o,r,h,l,c,d]=t,u=(e*l-h*i)/(o*l-h*r),p=(i*o-r*e)/(o*l-h*r);s.$ready(t=>{this.$setStyles.call(s,{width:t.naturalWidth*n,height:t.naturalHeight*n})}),s.$setTransform(o,r,h,l,(o*u+h*p+c)*n,(r*u+l*p+d)*n)}}}tW.$name=p,tW.$version="2.1.0";var tH='<cropper-canvas background><cropper-image rotatable scalable skewable translatable></cropper-image><cropper-shade hidden></cropper-shade><cropper-handle action="select" plain></cropper-handle><cropper-selection initial-coverage="0.5" movable resizable><cropper-grid role="grid" bordered covered></cropper-grid><cropper-crosshair centered></cropper-crosshair><cropper-handle action="move" theme-color="rgba(255, 255, 255, 0.35)"></cropper-handle><cropper-handle action="n-resize"></cropper-handle><cropper-handle action="e-resize"></cropper-handle><cropper-handle action="s-resize"></cropper-handle><cropper-handle action="w-resize"></cropper-handle><cropper-handle action="ne-resize"></cropper-handle><cropper-handle action="nw-resize"></cropper-handle><cropper-handle action="se-resize"></cropper-handle><cropper-handle action="sw-resize"></cropper-handle></cropper-selection></cropper-canvas>';let tM={template:tH};tT.$define(),t8.$define(),tD.$define(),tI.$define(),tN.$define(),tP.$define(),tO.$define(),tW.$define();class tV{constructor(t,e){var i;if(this.options=tM,q(t)&&(t=document.querySelector(t)),!tt(t)||!/^img|canvas$/.test(t.localName))throw Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,e=Object.assign(Object.assign({},tM),e),this.options=e;let{container:s}=e;if(s&&(q(s)&&(s=null===(i=tp(t))||void 0===i?void 0:i.querySelector(s)),!tt(s)))throw Error("The `container` option must be an element or a valid selector.");tt(s)||(s=t.parentElement?t.parentElement:t.ownerDocument.body),this.container=s;let n=t.localName,a="";"img"===n?{src:a}=t:"canvas"===n&&window.HTMLCanvasElement&&(a=t.toDataURL());let{template:o}=e;if(o&&q(o)){let r=document.createElement("template"),h=document.createDocumentFragment();r.innerHTML=o.replace(/<(\/?(?:script|style)[^>]*)>/gi,"&lt;$1&gt;"),h.appendChild(r.content),Array.from(h.querySelectorAll(c)).forEach(e=>{e.setAttribute("src",a),e.setAttribute("alt",t.alt||"The image to crop"),"img"===n&&["crossorigin","decoding","elementtiming","fetchpriority","loading","referrerpolicy","sizes","srcset",].forEach(i=>{t.hasAttribute(i)&&e.setAttribute(i,t.getAttribute(i)||"")})}),t.parentElement?(t.style.display="none",s.insertBefore(h,t.nextSibling)):s.appendChild(h)}}getCropperCanvas(){return this.container.querySelector(o)}getCropperImage(){return this.container.querySelector(c)}getCropperSelection(){return this.container.querySelector(d)}getCropperSelections(){return this.container.querySelectorAll(d)}destroy(){var t;let e=this.getCropperCanvas();e&&(null===(t=e.parentElement)||void 0===t||t.removeChild(e)),this.element&&(this.element.style.display="")}}tV.version="2.1.0",t.ACTION_MOVE=m,t.ACTION_NONE=v,t.ACTION_RESIZE_EAST=w,t.ACTION_RESIZE_NORTH=C,t.ACTION_RESIZE_NORTHEAST=S,t.ACTION_RESIZE_NORTHWEST=A,t.ACTION_RESIZE_SOUTH=y,t.ACTION_RESIZE_SOUTHEAST=_,t.ACTION_RESIZE_SOUTHWEST=T,t.ACTION_RESIZE_WEST=E,t.ACTION_ROTATE=f,t.ACTION_SCALE=b,t.ACTION_SELECT=g,t.ACTION_TRANSFORM=$,t.ATTRIBUTE_ACTION=k,t.CROPPER_CANVAS=o,t.CROPPER_CROSSHAIR=r,t.CROPPER_GIRD=h,t.CROPPER_HANDLE=l,t.CROPPER_IMAGE=c,t.CROPPER_SELECTION=d,t.CROPPER_SHADE=u,t.CROPPER_VIEWER=p,t.CropperCanvas=tT,t.CropperCrosshair=t8,t.CropperElement=t_,t.CropperGrid=tD,t.CropperHandle=tI,t.CropperImage=tN,t.CropperSelection=tP,t.CropperShade=tO,t.CropperViewer=tW,t.DEFAULT_TEMPLATE=tH,t.EVENT_ACTION=X,t.EVENT_ACTION_END=W,t.EVENT_ACTION_MOVE=H,t.EVENT_ACTION_START=M,t.EVENT_CHANGE=V,t.EVENT_ERROR=P,t.EVENT_KEYDOWN=D,t.EVENT_LOAD=L,t.EVENT_POINTER_DOWN=O,t.EVENT_POINTER_MOVE=I,t.EVENT_POINTER_UP=z,t.EVENT_RESIZE="resize",t.EVENT_TOUCH_END=x,t.EVENT_TOUCH_MOVE=N,t.EVENT_TOUCH_START=R,t.EVENT_TRANSFORM=U,t.EVENT_WHEEL=Y,t.HAS_POINTER_EVENT=n,t.IS_BROWSER=e,t.IS_TOUCH_DEVICE=s,t.NAMESPACE=a,t.WINDOW=i,t.default=tV,t.emit=tc,t.getAdjustedSizes=t$,t.getComposedPathTarget=td,t.getOffset=tg,t.getRootDocument=tp,t.isElement=tt,t.isFunction=Q,t.isNaN=B,t.isNumber=K,t.isObject=F,t.isPlainObject=J,t.isPositiveNumber=Z,t.isString=q,t.isUndefined=j,t.multiplyMatrices=tv,t.nextTick=t9,t.off=to,t.on=tr,t.once=th,t.toAngleInRadian=tb,t.toCamelCase=tn,t.toKebabCase=ti,Object.defineProperty(t,"__esModule",{value:!0})});